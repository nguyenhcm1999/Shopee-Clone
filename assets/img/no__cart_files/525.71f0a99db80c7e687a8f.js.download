/*!
 * Project: 'pcmall';
 * Module: 'flashsale';
 * Tag: 'pc-v4.103.1';
 * Branch: 'heads/pc-v4.103.1';
 * Last commit: '[RELEASE] pc-v4.103.1' (766b8df038aaf7677c9ae7968d75db36974d36ec);
 * Updated: '2021-12-30T06:17:15.434Z';
 */
(self.wpJsonpPcmallFlashsale=self.wpJsonpPcmallFlashsale||[]).push([[525],{694:function(e,t,a){"use strict";var r=a(3804),s=a.n(r),n=a(6704),l=a(2361),o=a(7762),i=a(6263),c=a(7073),m=a(2807);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}t.Z=function(e){var t=s().forwardRef((function(t,a){var u=(0,r.useContext)(o.InjectReducerContext).injectAsyncReducer;return(0,i.u)((function(){u({flashSale:c.g0,sMartFlashSaleReducer:m.XY})}),[u,c.g0,m.XY]),s().createElement(l.Z,{onTrack:n.Tracking.onTrack},s().createElement(e,_({},t,{ref:a})))})),a=function(e){return e.displayName||e.name||"Component"}(t);return t.displayName="WithFlashSaleWrap("+a+")",t}},8329:function(e,t,a){"use strict";a.d(t,{HS:function(){return H},ZP:function(){return W}});var r=a(3804),s=a.n(r),n=a(8997),l=a.n(n),o=a(5042),i=a(6704),c=a(8523),m=a(3905),_=a(3068),u=a(1579),d=a(9212);var p=i.I18n.t;var f=(0,i.withI18nCollections)([c.L,c.GC])((function(e){var t=e.sold,a=e.total,s=e.soldOutTime,n=void 0===s?0:s,o=e.startTime,i=void 0===o?0:o,c=e.layout,m=100*(a-t)/a,_=Math.ceil(Math.floor(2*m)/2),u=0===a||t===a,d=u?Math.floor((n-i)/3600):null,f=u&&0===d?n-i<60?1:Math.floor((n-i)/60)%60:null;return u?r.createElement("div",{className:l()("flash-sale-sold-out","flash-sale-sold-out--"+c)},f?1===f?p("label_amount_sold_out_in_1_min",{amount:a}):p("label_amount_sold_out_in_n_mins",{minutes:f,amount:a}):d?1===d?p("label_amount_sold_out_in_1_hour",{hours:1,amount:a}):p("label_amount_sold_out_in_n_hours",{hours:d,amount:a}):null):r.createElement("div",{className:"flash-sale-progress-bar__wrapper flash-sale-progress-bar__wrapper--"+c},r.createElement("div",{className:l()("flash-sale-progress-bar","flash-sale-progress-bar--"+c)},r.createElement("div",{className:l()("flash-sale-progress-bar__text",{"flash-sale-progress-bar__text--selling-fast":_<=15})},_>15?p("label_n_sold_flash_sale",{count:t>0?t:0}):p("label_selling_fast")),r.createElement("div",{className:l()("flash-sale-progress-bar__complement-wrapper","flash-sale-progress-bar__complement-wrapper--"+c)},r.createElement("div",{className:l()("flash-sale-progress-bar__complement-sizer","flash-sale-progress-bar__complement-sizer--"+c),style:{width:_+"%"}},r.createElement("div",{className:"flash-sale-progress-bar__complement-color"}))),m<=50&&r.createElement("div",{className:"flash-sale-progress-bar__fire"})))})),h=a(5915),g=a(1809),v=(0,a(5035).S)((0,g.of)()),E=h.LU.bind(null,h.x5[v]),N=function(e,t){var a=new Date(1e3*t),r=new Date(1e3*e),s=(0,h.IS)("minute",a,r);return E(a,r,{totalUnits:1,endUnit:"minute",roundLast:s>60?"floor":s<1?"ceil":"round",unitLowerBounds:{year:Number.MAX_VALUE,month:Number.MAX_VALUE,week:Number.MAX_VALUE,day:Number.MAX_VALUE}})},b=a(5548),y=a(3984);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var a,r,s={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(s[a]=e[a]);return s}function O(e,t,a,r){return function(s){e(),s&&s.stopPropagation(),s&&s.preventDefault(),r?window.location.href=t:a.push(t)}}function A(e){var t=e.trackingClick,a=e.to,s=e.history,n=k(e,["trackingClick","to","history"]);return r.createElement("div",{onClick:O(t,a,s,"string"==typeof a&&/^http/.test(a))},n.children)}function L(e){var t=e.targetType,a=k(e,["targetType"]),s=(0,y.Z)(t,{to:a.to});return r.createElement(A,w({trackingClick:s},a))}var x=a(980),C=a(4233),T=a(8312),P=a(4251),M=a(6219),I=(0,_.jK)(__LOCALE__),S=["PL","ES"].includes(__LOCALE__);var U=function(e){var t=e.priceText;return r.createElement(r.Fragment,null,!S&&r.createElement("span",{className:"item-price-dollar-sign"},I+" "),r.createElement("span",{className:"item-price-number"},t),S&&r.createElement("span",{className:"item-price-dollar-sign"}," "+I))};function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G=i.I18n.t,R=i.I18n.withI18nCollections,F={IN:"hot_deals",default:"flash_sale"},Z=F[i.Env.getLocale()]||F.default,B=function(e,t,a,r,s){var n=(0,_.jK)(a),l=r||0===r?(0,u.w)(a,(0,d.o)(r,a)):null;return e&&t?s?[e(n),s]:l?[e(n),t(l)]:"":s?""+n+s:""+n+(l||"")}.bind(null,(function(e){return s().createElement("span",{className:"item-price-dollar-sign",key:0},e+" ")}),(function(e){return s().createElement("span",{className:"item-price-number",key:1},e)}),__LOCALE__),H={HOME_PAGE:"home-page",LANDING_PAGE:"landing-page",MART_LANDING_PAGE:"mart-landing-page",MART_HOME_PAGE:"mart-home-page"},V=function(e){var t,a;function r(t){var a;return(a=e.call(this,t)||this).rootElement=null,a}a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,D(t,a);var n=r.prototype;return n.componentDidMount=function(){var e=this.props,t=e.item,a=e.isOngoing,r=t.flash_sale_stock,s=t.stock,n=r-s;a&&window.Sentry&&t&&n&&n<0&&window.Sentry.captureMessage("Flash Sale sold out count is negative\n        promotionid: "+t.promotionid+"\n        itemid: "+t.itemid+"\n        flash_sale_stock:"+s+"\n        stock:"+r+"\n        sold(flash_sale_stock-stock): "+n+",","error")},n.shouldComponentUpdate=function(e){return this.props.item.itemid!==e.item.itemid||this.props.item.promotionid!==e.item.promotionid},n.render=function(){var e=this,t=this.props,a=t.item,r=t.layout,n=t.overwriteCardLink,i=t.displayFlashSaleProgressBar,c=t.setShowDiscountBadge,_=t.isPlaceholder,u=t.isOngoing,d=t.toTrack,p=t.isDP,h=t.position,g=t.history,v=t.recommendation_info;if(_&&"home-page"===r)return s().createElement("div",{className:l()("flash-sale-item-card","flash-sale-item-card--home-page")},s().createElement("div",{className:l()("flash-sale-item-card__image","flash-sale-item-card__image--home-page")},s().createElement(m.p,{className:"flash-sale-item-card-placeholder__image"})),s().createElement("div",{className:l()("flash-sale-item-card__lower-wrapper","flash-sale-item-card__lower-wrapper--home-page")},s().createElement("div",{className:"skeleton-full"},s().createElement("div",{className:"center skeleton-full",style:{height:26}},s().createElement("div",{className:"skeleton skeleton-medium skeleton-line"})),s().createElement("div",{className:"center skeleton-full",style:{height:16}},s().createElement("div",{className:"skeleton skeleton-full skeleton-line"})))));var E=u,y=E&&(0===a.stock||0===a.flash_sale_stock||a.is_soldout),w=a.raw_discount,k=(0,o.Jn)(a.promo_images&&a.promo_images.length>0?a.promo_images[0]:a.image,!0),O=function(e,t){if(e){var a="TW"===__LOCALE__?(100-e.extra_discount)/10:e.extra_discount,r="";if(e.end_time&&e.start_time&&(r=N(e.start_time,e.end_time)),e&&"function"==typeof t)return r?t("fs_extra_n_off_applied_for_first_m_in_x",{n:a,m:e.extra_discount_stock,x:r}):t("fs_extra_n_off_applied_for_first_m",{n:a,m:e.extra_discount_stock})}return""}(a.extra_discount_info,G),A=r===H.LANDING_PAGE||r===H.MART_LANDING_PAGE,P=!!O&&A,I=B(a.price),S=B(a.price_before_discount),D=a.hidden_price_display,R=!!a&&!!a.shopid&&!!a.itemid,F=n||(R?y?M.xW.getUrl({seoName:a.name,shopId:a.shopid,itemId:a.itemid,from:Z,promotionid:a.promotionid}):(0,C.O)(a.shopid,a.itemid,a.name):""),V={isDP:p,toTrack:d,item:a,position:h,isOngoing:u,recommendation_info:v};return R?s().createElement("div",{ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){e.rootElement=t,e.props.trackingRef&&e.props.trackingRef(t)})),onClick:function(){e.props.trackingClick&&e.props.trackingClick()},className:l()("flash-sale-item-card","flash-sale-item-card--"+r.replace("_","-").toLowerCase(),"flash-sale-item-card--"+__LOCALE__,{"flash-sale-item-card--sold-out":y})},s().createElement(x.Z,{className:"flash-sale-item-card-link",to:F},s().createElement("div",{className:l()("flash-sale-item-card__image","flash-sale-item-card__image--"+r)},y&&s().createElement(b.VL,null),a.promo_overlay_image&&s().createElement(m.p,{src:(0,o.Jn)(a.promo_overlay_image,!0),className:l()("flash-sale-item-card__image-overlay","flash-sale-item-card__image-overlay--"+r),imageServerWidthOperator:320}),s().createElement(m.p,{className:"flash-sale-item-card__animated-image",src:k,imageServerWidthOperator:320})),A&&s().createElement("div",{className:l()("flash-sale-item-card__item-name",!O&&"flash-sale-item-card__item-name-extra-discount")},s().createElement("div",{className:O?"flash-sale-item-card__item-name-box-extra-discount":"flash-sale-item-card__item-name-box",title:a.promo_name||a.name},a.promo_name||a.name)),P&&s().createElement("div",{className:"flash-sale-item-card__extra-discount-label"},O),(A||!u&&r===H.MART_HOME_PAGE)&&a.price_before_discount!==a.price&&s().createElement("div",{className:l()("flash-sale-item-card__original-price","flash-sale-item-card__original-price--"+r)},S),s().createElement("div",{className:l()("flash-sale-item-card__lower-wrapper","flash-sale-item-card__lower-wrapper--"+__LOCALE__,"flash-sale-item-card__lower-wrapper--"+r,!E&&"flash-sale-item-card__lower-wrapper--"+r+"__coming-soon")},s().createElement("div",{className:"flash-sale-item-card__lower-left"},s().createElement("div",{className:l()("flash-sale-item-card__current-price","flash-sale-item-card__current-price--"+r,!E&&"flash-sale-item-card__current-price--"+r+"__coming-soon")},D?s().createElement(U,{priceText:D}):I),i&&s().createElement(f,{sold:a.flash_sale_stock-a.stock,total:a.flash_sale_stock,soldOutTime:a.end_time,startTime:a.start_time,layout:r})),s().createElement("div",{className:"flash-sale-item-card__lower-right"},!y&&A&&E&&s().createElement(L,j({},V,{targetType:"BuyNowButton",to:F,history:g}),s().createElement("div",{className:l()("flash-sale-item-card__buy-now-button","flash-sale-item-card__buy-now-button--"+r)},G("label_buy_now_flash_sale"))),(A||r===H.MART_HOME_PAGE)&&!E&&s().createElement(L,j({},V,{targetType:"ViewDetailsButton",to:F,history:g}),s().createElement("div",{className:l()("flash-sale-item-card__view-details-button","flash-sale-item-card__view-details-button--"+r)},G("label_btn_view_details")))),c&&!!w&&u&&s().createElement("div",{className:l()("shopee-item-card__badge-wrapper","shopee-fs-item-card__badge-wrapper","shopee-fs-item-card__badge-wrapper--"+r)},s().createElement(b.OO,{rawDiscount:w,language:T.UA,key:"badge-promotion",offText:G("pr_badge_label_off")}))))):null},r}(r.Component),W=R([c.x7,c.L])((0,P.Z)(V,"FlashSaleItemCard"))},4233:function(e,t,a){"use strict";a.d(t,{O:function(){return s}});var r=a(9373);function s(e,t,a){return a?r.Z.getUrl({seoName:a,shopId:e,itemId:t}):r.O.getUrl({shopId:e,itemId:t})}},8312:function(e,t,a){"use strict";a.d(t,{UA:function(){return n},se:function(){return o}});var r=a(1809),s=a(7143),n=(0,r.of)(),l=(0,s.pO)(__LOCALE__),o=(l.language,l.languages,l.countryName,l.currency);l.adultAge,s.H0[__LOCALE__]},8610:function(e,t,a){var r=a(6704).FetchUtils;e.exports=r}}]);